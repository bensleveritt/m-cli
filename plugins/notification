#!/usr/bin/env bash

source "$( dirname "${BASH_SOURCE[0]}" )/../lib/defaults.sh"
source "$( dirname "${BASH_SOURCE[0]}" )/../lib/converters.sh"

help(){
    cat<<__EOF__
    usage: m notification [ showcenter | help ]

    Examples:
      m notification showcenter      # get the current status
      m notification showcenter YES  # enable the notification center
      m notification showcenter NO   # disable the notification center
__EOF__
}

showcenter(){
    local choice="$(_mcli_convert_yes_no_to_load_unload $1)"

    launchctl "${choice}" -w /System/Library/LaunchAgents/com.apple.notificationcenterui.plist

    [ -n "${choice}" ] && killall NotificationCenter && echo "Restart your computer for this to take effect"

    value="$(_mcli_convert_exit_status_to_enabled_disabled "ps -A | grep apsd | grep -v grep")"

    echo "Notification Center ${value}"
}

case $1 in
    help)
        help
        ;;
    showcenter)
        shift
        showcenter "$@"
        ;;
    *)
        help
        ;;
esac

# vim: ts=4 sw=4 softtabstop=4 expandtab
