#!/usr/bin/env bash

source "$( dirname "${BASH_SOURCE[0]}" )/../lib/defaults.sh"
source "$( dirname "${BASH_SOURCE[0]}" )/../lib/helpers.sh"

help(){
    cat<<__EOF__
    usage: m airdrop [ onlywifi | help ]

    Examples:
      m airdrop onlywifi YES      #  allow airdropping only via WIFI
      m airdrop onlywifi NO       #  allow airdropping via any network interface
__EOF__
}

onlywifi(){
    local choice="$(_mcli_yes_no_to_boolean "$1")"

    defaults write com.apple.NetworkBrowser BrowseAllInterfaces -bool "${choice}"

    value="$(_mcli_read_boolean "com.apple.NetworkBrowser" "BrowseAllInterfaces")"

    echo "Airdrop onlywifi: ${value}"
}

case $1 in
    help)
        help
        ;;
    onlywifi)
        shift
        onlywifi $@
        ;;
    *)
        help
        ;;
esac

# vim: ts=4 sw=4 softtabstop=4 expandtab
